<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><meta name="theme-color" content="#000000"/><link rel="icon" href="/static/images/favicon.ico"/><link rel="apple-touch-icon" href="/static/images/logo192.png"/><link rel="stylesheet" href="/static/lib/simplemde.min.css"><script async src="https://www.googletagmanager.com/gtag/js?id=G-0L4WRG1D3N"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0L4WRG1D3N")</script><title>nodejs模块(CommonJS)与es6模块的区别 | bill-lai 的博客</title><link href="/static/css/main.8f23dd88.chunk.css" rel="stylesheet"></head><body><input placeholder=""><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="style_app__1yczT"><header class="style_slide__z5PNT style_slide__3Yi3e"><a href="/"><img src="/static/media/portrait.df7a5375.jpg" class="style_portrait__2GrBh" alt="portrait"/></a><div class="style_content__3GlZB"><div class="style_introduce__2UxnL"><h1><a href="/">bill-lai</a></h1><p>专注 WEB 端开发</p></div><ul class="style_navs__2yN9I"><li><a href="/">首页</a></li><li><a href="/archive">专题</a></li><li><a href="/special">归档</a></li></ul></div></header><div class="style_body__3Yz5T"><div class="style_layer__1ZQZt"><div class="style_main__XnHDF"><div> <h1 class="main-title">nodejs模块(CommonJS)与es6模块的区别<span class="marker">2022-02-15 10:22</span></h1><div class="marked-body"><div><h2 id="commonjs">CommonJS</h2>
<p>&emsp;&emsp;<code>CommonJS</code>是由<code>JavaScript</code>社区在2009提出的包含模块、文件、IO、控制台在内的一系列标准。在<code>Node.js</code>的实现中采用<code>CommonJS</code>标准的一部分，并在它的基础上进行了一些调整。我们听说的<code>CommonJS</code>模块和<code>Node.js</code>中的实现并不完全一样，现在一般谈到<code>CommonJS</code>其实就是<code>Node.js</code>的版本，而非原始版本。</p>
<h3 id="模块">模块</h3>
<p>&emsp;&emsp;<code>CommonJS</code>中规定每个文件就是一个文件模块，使用<code>require</code>函数引入使用模块。</p>
<pre><code class="language-js"><span class="token comment">// add.js</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'current file add.js'</span><span class="token punctuation">)</span>

<span class="token comment">// main.js</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./add.js'</span><span class="token punctuation">)</span> <span class="token comment">//current file add.js</span>
</code></pre>
<h3 id="导出">导出</h3>
<p>&emsp;&emsp;在<code>CommonJS</code>中导出是一个模块向外唯一暴露自身的方式。在<code>CommonJS</code>中通过<code>module.exports</code>导出模块内容。<code>module</code>是<code>CommonJS</code>内部定义的一个对象，存放模块信息，可以看做每个模块的顶部都有一个<code>module</code>对象定义，这个对象有个<code>exports</code>属性。模块内除了<code>module</code>定义外还会声明<code>exports</code>定义，<code>exports</code>是指向<code>module.exports</code>的。所以需要注意，对<code>exports</code>赋值时<code>module.exports</code>并不会更改。</p>
<pre><code class="language-js"><span class="token comment">// add.js</span>
<span class="token comment">// 模块导出可以看做</span>
<span class="token comment">// var module = { exports: {} }</span>
<span class="token comment">// var exports = module.exports</span>

module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'module.exports add'</span>
<span class="token punctuation">}</span>
<span class="token comment">// 直接更改相当于对exports变量的更改，并不会真实更改到module.exports</span>
exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'exports add'</span>
<span class="token punctuation">}</span>

<span class="token comment">// main.js</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./add.js'</span><span class="token punctuation">)</span> 
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>add<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span>  <span class="token comment">// module.exports add</span>
</code></pre>
<h3 id="导入">导入</h3>
<p>&emsp;&emsp;在<code>CommonJS</code>中使用<code>require</code>方法进行模块导入。<code>require</code>导入的模块只有第一次加载才会执行模块的内容，后续都是获取到第一次执行模块内容是生成的<code>module.exports</code>。<code>require</code>函数可以接受表达式，也就是动态的。</p>
<pre><code class="language-js"><span class="token comment">// add.js</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'run add.js'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">// demo1.js</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./add.js'</span><span class="token punctuation">)</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// demo2.js</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./add.js'</span><span class="token punctuation">)</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// main.js</span>
<span class="token keyword">const</span> moduleNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'./demo1.js'</span><span class="token punctuation">,</span> <span class="token string">'./demo2.js'</span><span class="token punctuation">]</span>
<span class="token doc-comment comment">/**
 * run add.js
 * 3
 * 4
 **/</span>
moduleNames<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span>
</code></pre>
<h2 id="es6-modules">ES6 Modules</h2>
<p>&emsp;&emsp;在2015年6月，<code>TC39</code>标准委员会正式发布了<code>ES6</code>，从此<code>JavaScipt</code>语言具备模块这一特征.</p>
<h3 id="模块-1">模块</h3>
<p>&emsp;&emsp;<code>ES6 Module</code>也是将每个文件作为一个单独的模块。<code>import</code>和<code>export</code>作为保留关键字在<code>ES6</code>版本中也加入了进来。当使用<code>ES6</code>模块时会自动采用严格模式，在<code>ES5</code>使用<code>use strict</code>开启。</p>
<pre><code class="language-js"><span class="token comment">// add.js</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'current file add.js'</span><span class="token punctuation">)</span>

<span class="token comment">// main.js</span>
<span class="token keyword module">import</span> <span class="token string">'add.js'</span> <span class="token comment">//current file add.js</span>
</code></pre>
<h3 id="导出-1">导出</h3>
<p>&emsp;&emsp;<code>ES6 Module</code>使用<code>export</code>关键字导出模块，可以使用命名导出和默认导出两种方式。命名导出有凉中方式，第一种是将声明和导出一起执行，第二种是先声明再用同一个<code>export</code>导出。使用命名导出时可以使用<code>as</code>关键字对变量重命名。默认导出只能有一个。</p>
<pre><code class="language-js"><span class="token comment">// demoA.js</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'demoA'</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> a <span class="token operator">+</span> b

<span class="token comment">// demoB.js</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'demoB'</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> a <span class="token operator">+</span> b

<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> add <span class="token keyword module">as</span> addB <span class="token punctuation">}</span></span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> add
</code></pre>
<h3 id="导入-1">导入</h3>
<p>&emsp;&emsp;<code>ES6 Module</code>使用<code>import</code>关键字导入模块。与<code>require</code>类似，<code>import</code>导入的模块只有第一次加载才会执行模块的内容。在<code>import</code>关键字后面使用大括号将要导入的变量名包裹起来，与导出类似可以使用<code>as</code>关键字对变量重命名。可以使用<code>import * as &lt;myModule&gt;</code>来讲模块的所有变量导入到<code>&lt;myModule&gt;</code>对象中。对于默认导出可以使用<code>import</code>后面跟变量名的方式引入，也可以使用大括号包裹，导出在<code>default</code>的变量中。另外导入可以多种方式并用，用逗号隔开。</p>
<pre><code class="language-js"><span class="token comment">// demo1.js</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'run demo1.js'</span><span class="token punctuation">)</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'demo1'</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">// demo2</span>
<span class="token keyword module">import</span> <span class="token string">'./demo1'</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'demo2'</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> a <span class="token operator">-</span> b
<span class="token punctuation">}</span>

<span class="token comment">// main.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> <span class="token keyword module">default</span> <span class="token keyword module">as</span> add <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./demo1.js'</span>
<span class="token keyword module">import</span> <span class="token imports">diff<span class="token punctuation">,</span> <span class="token punctuation">{</span> name <span class="token keyword module">as</span> diffName <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./demo2.js'</span>
</code></pre>
<p>&emsp;&emsp;<code>ES6 Module</code>还支持复合写法，比如将一个模块导入后马上导出，一般是专门用在模块的入口文件。</p>
<pre><code class="language-js"><span class="token comment">// a.js</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> a <span class="token operator">+</span> b
<span class="token keyword module">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'a'</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token function-variable function">diff</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> a <span class="token operator">-</span> b

<span class="token comment">// main.js</span>
<span class="token keyword module">export</span> <span class="token exports"><span class="token punctuation">{</span> add<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token keyword module">default</span> <span class="token keyword module">as</span> diff <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./a.js'</span>
</code></pre>
<h2 id="区别">区别</h2>
<p>&emsp;&emsp;上面我们介绍的<code>CommonJS</code>和<code>ES6 Module</code>两种形式的模块我们开发中经常会使用，这里我们对比一下它们各自的特征。</p>
<h3 id="动态与静态">动态与静态</h3>
<p>&emsp;&emsp;<code>CommonJS</code>与<code>ES6 Module</code>最大的区别在于前者对模块的依赖是动态的，后者是静态的。动态是指模块依赖关系的建立是在代码运行时建立的。静态是指模块依赖关系是在编译节点建立的。<br>&emsp;&emsp;<code>CommonJS</code>中<code>require</code>引用的路径可以动态指定，支持表达式，可以通过<code>if</code>语句来判断是否加载某个模块。<code>module.exports</code>也是个对象，可以随时动态的添加导出变量。所以在代码执行前都是没办法确定依赖关系的。<code>ES6 Module</code>的<code>import</code>和<code>module</code>导入导出都是声明式的，不支持表达式，而且导入导出都必须在模块的顶层作用域（无法放置到<code>if</code>语句中）。所以<code>ES6 Module</code>在编译阶段就能分析出依赖关系。<code>ES6 Module</code>相对与<code>CommonJS</code>来说有下面2点优点</p>
<ul>
<li>死代码的检测和排除。什么是死代码就是指我们引入了某个库但是只使用了某些模块，其他代码并没有使用到。通过静态分析就可以在打包的时候去掉这些死代码，减少打包的体积。</li>
<li>模块变量类型检查。<code>ES6 Module</code>的静态模块解构有助于确认模块之间传递的值和接口的正确性</li>
</ul>
<h3 id="值拷贝与动态映射">值拷贝与动态映射</h3>
<p>&emsp;&emsp;在导入一个模块时，<code>CommonJS</code>是将导出值进行一份拷贝赋值给变量；而在<code>ES6 Module</code>中则是值的动态映射，并且这个映射是无法更改的。值拷贝意味着当引用模块内的变量变化时，引用者使用的变量可能是旧的，并且可能是错的，而动态映射则没这个问题，引用模块抛出的永远是模块内变量的映射而已。比如看下方<code>CommonJS</code>和<code>ES6 Module</code>的两个例子</p>
<pre><code class="language-js"><span class="token comment">// demo.js</span>
<span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> count<span class="token punctuation">,</span>
  <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    count <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword control-flow">return</span> a <span class="token operator">+</span> b
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// main.js</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./demo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">count</span>
<span class="token keyword">const</span> add <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./demo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">add</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 0</span>
count <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 拷贝值可更改</span>
</code></pre>
<pre><code class="language-js"><span class="token comment">// demo.js</span>
<span class="token keyword module">export</span> <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  count <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token keyword control-flow">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>

<span class="token comment">// main.js</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> count<span class="token punctuation">,</span> add <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'./demo'</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token comment">// count += 1 SyntaxError</span>
</code></pre>
<p>&emsp;&emsp;完结撒花。</p>
</div></div><div class="style_article-loading-layer__3poja"><div class="style_layer__GxMiF"><div style="fill:var(--vice-color);height:64px;width:64px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <circle transform="translate(8 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="translate(16 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0.3"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
  <circle transform="translate(24 0)" cx="0" cy="16" r="0"> 
    <animate attributeName="r" values="0; 4; 0; 0" dur="1.2s" repeatCount="indefinite" begin="0.6"
      keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" />
  </circle>
</svg>
</div></div></div> </div><div class="style_bottom__29qYA"><p>©2021 - bill-lai 的小站 -<a rel="noreferrer" href="https://github.com/bill-lai/bill-lai.github.io" target="_blank">站点源码</a></p><p>本站使用<a rel="noreferrer" target="_blank" href="https://react.docschina.org/docs/hooks-reference.html#usememo">ReactHook</a><a rel="noreferrer" target="_blank" href="https://www.typescriptlang.org/zh/">TypeScript</a><a rel="noreferrer" target="_blank" href="https://docs.github.com/cn/rest">githubAPI</a><a rel="noreferrer" target="_blank" href="https://simplemde.com/">SimpleMDE</a>制作</p></div></div><div class="style_right-layer__Rm9TS "><div class="style_right__3hdcL"><div class="style_right-content__F68mu"><div class="navigation"><h4 class="style_title__1aA1F">目录列表</h4><ul class="style_top-navs__3vyAr"><li class=""><span>CommonJS<!-- --> <i class="iconfont icon-arrow_down"></i></span><ul class="style_child-navs__6paad"><li class=""><span>模块<!-- --> </span></li><li class=""><span>导出<!-- --> </span></li><li class=""><span>导入<!-- --> </span></li></ul></li><li class=""><span>ES6 Modules<!-- --> <i class="iconfont icon-arrow_down"></i></span><ul class="style_child-navs__6paad"><li class=""><span>模块<!-- --> </span></li><li class=""><span>导出<!-- --> </span></li><li class=""><span>导入<!-- --> </span></li></ul></li><li class=""><span>区别<!-- --> <i class="iconfont icon-arrow_down"></i></span><ul class="style_child-navs__6paad"><li class=""><span>动态与静态<!-- --> </span></li><li class=""><span>值拷贝与动态映射<!-- --> </span></li></ul></li></ul></div></div></div></div></div></div></div></div>
        <script>var globalState = {"article/fa55d32a37ff470c6dfa":{"title":"nodejs模块(CommonJS)与es6模块的区别","id":"fa55d32a37ff470c6dfa","mtime":1644891761675,"ctime":1644891305967,"issues":{"number":17,"commentsUrl":"https://api.github.com/repos/bill-lai/bill-lai.github.io/issues/17/comments","reactionsUrl":"https://api.github.com/repos/bill-lai/bill-lai.github.io/issues/17/reactions"},"head":null,"foot":null,"dirs":[{"leave":2,"title":"CommonJS","children":[{"leave":3,"title":"模块","children":[]},{"leave":3,"title":"导出","children":[]},{"leave":3,"title":"导入","children":[]}]},{"leave":2,"title":"ES6 Modules","children":[{"leave":3,"title":"模块","children":[]},{"leave":3,"title":"导出","children":[]},{"leave":3,"title":"导入","children":[]}]},{"leave":2,"title":"区别","children":[{"leave":3,"title":"动态与静态","children":[]},{"leave":3,"title":"值拷贝与动态映射","children":[]}]}],"body":"<h2 id=\"commonjs\">CommonJS</h2>\n<p>&emsp;&emsp;<code>CommonJS</code>是由<code>JavaScript</code>社区在2009提出的包含模块、文件、IO、控制台在内的一系列标准。在<code>Node.js</code>的实现中采用<code>CommonJS</code>标准的一部分，并在它的基础上进行了一些调整。我们听说的<code>CommonJS</code>模块和<code>Node.js</code>中的实现并不完全一样，现在一般谈到<code>CommonJS</code>其实就是<code>Node.js</code>的版本，而非原始版本。</p>\n<h3 id=\"模块\">模块</h3>\n<p>&emsp;&emsp;<code>CommonJS</code>中规定每个文件就是一个文件模块，使用<code>require</code>函数引入使用模块。</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// add.js</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'current file add.js'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./add.js'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//current file add.js</span>\n</code></pre>\n<h3 id=\"导出\">导出</h3>\n<p>&emsp;&emsp;在<code>CommonJS</code>中导出是一个模块向外唯一暴露自身的方式。在<code>CommonJS</code>中通过<code>module.exports</code>导出模块内容。<code>module</code>是<code>CommonJS</code>内部定义的一个对象，存放模块信息，可以看做每个模块的顶部都有一个<code>module</code>对象定义，这个对象有个<code>exports</code>属性。模块内除了<code>module</code>定义外还会声明<code>exports</code>定义，<code>exports</code>是指向<code>module.exports</code>的。所以需要注意，对<code>exports</code>赋值时<code>module.exports</code>并不会更改。</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// add.js</span>\n<span class=\"token comment\">// 模块导出可以看做</span>\n<span class=\"token comment\">// var module = { exports: {} }</span>\n<span class=\"token comment\">// var exports = module.exports</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token property-access\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'module.exports add'</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 直接更改相当于对exports变量的更改，并不会真实更改到module.exports</span>\nexports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'exports add'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword\">const</span> add <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./add.js'</span><span class=\"token punctuation\">)</span> \n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>add<span class=\"token punctuation\">.</span><span class=\"token property-access\">name</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// module.exports add</span>\n</code></pre>\n<h3 id=\"导入\">导入</h3>\n<p>&emsp;&emsp;在<code>CommonJS</code>中使用<code>require</code>方法进行模块导入。<code>require</code>导入的模块只有第一次加载才会执行模块的内容，后续都是获取到第一次执行模块内容是生成的<code>module.exports</code>。<code>require</code>函数可以接受表达式，也就是动态的。</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// add.js</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'run add.js'</span><span class=\"token punctuation\">)</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token method-variable function-variable method function property-access\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> a <span class=\"token operator\">+</span> b\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// demo1.js</span>\n<span class=\"token keyword\">const</span> add <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./add.js'</span><span class=\"token punctuation\">)</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// demo2.js</span>\n<span class=\"token keyword\">const</span> add <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./add.js'</span><span class=\"token punctuation\">)</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword\">const</span> moduleNames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'./demo1.js'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'./demo2.js'</span><span class=\"token punctuation\">]</span>\n<span class=\"token doc-comment comment\">/**\n * run add.js\n * 3\n * 4\n **/</span>\nmoduleNames<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">forEach</span><span class=\"token punctuation\">(</span>require<span class=\"token punctuation\">)</span>\n</code></pre>\n<h2 id=\"es6-modules\">ES6 Modules</h2>\n<p>&emsp;&emsp;在2015年6月，<code>TC39</code>标准委员会正式发布了<code>ES6</code>，从此<code>JavaScipt</code>语言具备模块这一特征.</p>\n<h3 id=\"模块-1\">模块</h3>\n<p>&emsp;&emsp;<code>ES6 Module</code>也是将每个文件作为一个单独的模块。<code>import</code>和<code>export</code>作为保留关键字在<code>ES6</code>版本中也加入了进来。当使用<code>ES6</code>模块时会自动采用严格模式，在<code>ES5</code>使用<code>use strict</code>开启。</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// add.js</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'current file add.js'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token string\">'add.js'</span> <span class=\"token comment\">//current file add.js</span>\n</code></pre>\n<h3 id=\"导出-1\">导出</h3>\n<p>&emsp;&emsp;<code>ES6 Module</code>使用<code>export</code>关键字导出模块，可以使用命名导出和默认导出两种方式。命名导出有凉中方式，第一种是将声明和导出一起执行，第二种是先声明再用同一个<code>export</code>导出。使用命名导出时可以使用<code>as</code>关键字对变量重命名。默认导出只能有一个。</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// demoA.js</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'demoA'</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> a <span class=\"token operator\">+</span> b\n\n<span class=\"token comment\">// demoB.js</span>\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'demoB'</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> a <span class=\"token operator\">+</span> b\n\n<span class=\"token keyword module\">export</span> <span class=\"token exports\"><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> add <span class=\"token keyword module\">as</span> addB <span class=\"token punctuation\">}</span></span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> add\n</code></pre>\n<h3 id=\"导入-1\">导入</h3>\n<p>&emsp;&emsp;<code>ES6 Module</code>使用<code>import</code>关键字导入模块。与<code>require</code>类似，<code>import</code>导入的模块只有第一次加载才会执行模块的内容。在<code>import</code>关键字后面使用大括号将要导入的变量名包裹起来，与导出类似可以使用<code>as</code>关键字对变量重命名。可以使用<code>import * as &lt;myModule&gt;</code>来讲模块的所有变量导入到<code>&lt;myModule&gt;</code>对象中。对于默认导出可以使用<code>import</code>后面跟变量名的方式引入，也可以使用大括号包裹，导出在<code>default</code>的变量中。另外导入可以多种方式并用，用逗号隔开。</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// demo1.js</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'run demo1.js'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'demo1'</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> a <span class=\"token operator\">+</span> b\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// demo2</span>\n<span class=\"token keyword module\">import</span> <span class=\"token string\">'./demo1'</span>\n\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'demo2'</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword control-flow\">return</span> a <span class=\"token operator\">-</span> b\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword module\">as</span> add <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'./demo1.js'</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\">diff<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> name <span class=\"token keyword module\">as</span> diffName <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'./demo2.js'</span>\n</code></pre>\n<p>&emsp;&emsp;<code>ES6 Module</code>还支持复合写法，比如将一个模块导入后马上导出，一般是专门用在模块的入口文件。</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// a.js</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> a <span class=\"token operator\">+</span> b\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token function-variable function\">diff</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> a <span class=\"token operator\">-</span> b\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword module\">export</span> <span class=\"token exports\"><span class=\"token punctuation\">{</span> add<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> <span class=\"token keyword module\">default</span> <span class=\"token keyword module\">as</span> diff <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'./a.js'</span>\n</code></pre>\n<h2 id=\"区别\">区别</h2>\n<p>&emsp;&emsp;上面我们介绍的<code>CommonJS</code>和<code>ES6 Module</code>两种形式的模块我们开发中经常会使用，这里我们对比一下它们各自的特征。</p>\n<h3 id=\"动态与静态\">动态与静态</h3>\n<p>&emsp;&emsp;<code>CommonJS</code>与<code>ES6 Module</code>最大的区别在于前者对模块的依赖是动态的，后者是静态的。动态是指模块依赖关系的建立是在代码运行时建立的。静态是指模块依赖关系是在编译节点建立的。<br>&emsp;&emsp;<code>CommonJS</code>中<code>require</code>引用的路径可以动态指定，支持表达式，可以通过<code>if</code>语句来判断是否加载某个模块。<code>module.exports</code>也是个对象，可以随时动态的添加导出变量。所以在代码执行前都是没办法确定依赖关系的。<code>ES6 Module</code>的<code>import</code>和<code>module</code>导入导出都是声明式的，不支持表达式，而且导入导出都必须在模块的顶层作用域（无法放置到<code>if</code>语句中）。所以<code>ES6 Module</code>在编译阶段就能分析出依赖关系。<code>ES6 Module</code>相对与<code>CommonJS</code>来说有下面2点优点</p>\n<ul>\n<li>死代码的检测和排除。什么是死代码就是指我们引入了某个库但是只使用了某些模块，其他代码并没有使用到。通过静态分析就可以在打包的时候去掉这些死代码，减少打包的体积。</li>\n<li>模块变量类型检查。<code>ES6 Module</code>的静态模块解构有助于确认模块之间传递的值和接口的正确性</li>\n</ul>\n<h3 id=\"值拷贝与动态映射\">值拷贝与动态映射</h3>\n<p>&emsp;&emsp;在导入一个模块时，<code>CommonJS</code>是将导出值进行一份拷贝赋值给变量；而在<code>ES6 Module</code>中则是值的动态映射，并且这个映射是无法更改的。值拷贝意味着当引用模块内的变量变化时，引用者使用的变量可能是旧的，并且可能是错的，而动态映射则没这个问题，引用模块抛出的永远是模块内变量的映射而已。比如看下方<code>CommonJS</code>和<code>ES6 Module</code>的两个例子</p>\n<pre><code class=\"language-js\"><span class=\"token comment\">// demo.js</span>\n<span class=\"token keyword\">var</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nmodule<span class=\"token punctuation\">.</span><span class=\"token property-access\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> count<span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    count <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword control-flow\">return</span> a <span class=\"token operator\">+</span> b\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword\">const</span> count <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./demo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">count</span>\n<span class=\"token keyword\">const</span> add <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./demo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token property-access\">add</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 0</span>\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 0</span>\ncount <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 拷贝值可更改</span>\n</code></pre>\n<pre><code class=\"language-js\"><span class=\"token comment\">// demo.js</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token arrow operator\">=></span> <span class=\"token punctuation\">{</span>\n  count <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n  <span class=\"token keyword control-flow\">return</span> a <span class=\"token operator\">+</span> b\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// main.js</span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token punctuation\">{</span> count<span class=\"token punctuation\">,</span> add <span class=\"token punctuation\">}</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">'./demo'</span>\n\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 0</span>\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// count += 1 SyntaxError</span>\n</code></pre>\n<p>&emsp;&emsp;完结撒花。</p>\n","desc":"CommonJS\n  CommonJS是由JavaScript社区在2009提出的包含模块、文件、IO、控制台在内的一系列标准。在Node.js的实现中采用CommonJS标准的一部分，并在它的基础上进行了一些调整。我们听说的CommonJS模块和Node.js中的实现并不完全一样，现在一般谈到Co"}}</script><script>!function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],s=0,p=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);for(f&&f(t);p.length;)p.shift()();return u.push.apply(u,l||[]),r()}function r(){for(var e,t=0;t<u.length;t++){for(var r=u[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(u.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={1:0},a={1:0},u=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[];o[e]?t.push(o[e]):0!==o[e]&&{4:1}[e]&&t.push(o[e]=new Promise((function(t,r){for(var n="static/css/"+({}[e]||e)+"."+{3:"31d6cfe0",4:"4422e775"}[e]+".chunk.css",a=i.p+n,u=document.getElementsByTagName("link"),c=0;c<u.length;c++){var l=(f=u[c]).getAttribute("data-href")||f.getAttribute("href");if("stylesheet"===f.rel&&(l===n||l===a))return t()}var s=document.getElementsByTagName("style");for(c=0;c<s.length;c++){var f;if((l=(f=s[c]).getAttribute("data-href"))===n||l===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||a,u=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=n,delete o[e],p.parentNode.removeChild(p),r(u)},p.href=a,document.getElementsByTagName("head")[0].appendChild(p)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=function(e){return i.p+"static/js/"+({}[e]||e)+"."+{3:"c6f781a0",4:"199baeb9"}[e]+".chunk.js"}(e);var l=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(s);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,r[1](l)}a[e]=void 0}};var s=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=this.webpackJsonpsource=this.webpackJsonpsource||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var f=l;r()}([])</script><script src="/static/js/2.b25e0f2c.chunk.js"></script><script src="/static/js/main.18e76180.chunk.js"></script></body></html>